function imageChoices_SelectedFields(){var e=jQuery(".image-choices-field"),i=e.length?e.find(".gfield_radio li, .gfield_checkbox li"):[];i.length>0&&i.find("input:checked").each(function(){var e=jQuery(this),i=e.closest("li");i.addClass(imageChoices_classes.selected)})}function imageChoices_onChoiceKeyPress(e){var i=9,s=32,c=jQuery(e.target),o=c.closest(".gfield");if(e.keyCode===s&&(c.is(":checkbox")||c.is(":radio")))c.is(":radio")&&!c.is(":checked")?e.preventDefault():c.is(":checkbox")&&(e.preventDefault(),e.stopImmediatePropagation());else if(e.keyCode===i&&o.hasClass("image-choices-field")){var a=e.shiftKey?"previous":"next",t=c.closest(".image-choices-choice");"next"===a?t.is(":last-child")||(e.preventDefault(),t.next(".image-choices-choice").find("> input").focus()):"previous"===a&&(t.is(":first-child")||(e.preventDefault(),t.prev(".image-choices-choice").find("> input").focus()))}}function onImageChoicesLabelClick(e){var i=e.closest("li"),s=i.closest("ul"),c=i.find("input");s.hasClass("gfield_radio")?(s.find("."+imageChoices_classes.selected).not(i).removeClass(imageChoices_classes.selected).find("input").prop("checked",!1),i.addClass(imageChoices_classes.selected)):s.hasClass("gfield_checkbox")&&(c.is(":checked")?i.addClass(imageChoices_classes.selected):i.removeClass(imageChoices_classes.selected))}function imageChoices_SetUpFields(){jQuery(".entry-details .detail-view .image-choices-choice-image-wrap").length&&jQuery(".entry-details .detail-view .image-choices-choice-image-wrap").each(function(e){var i=jQuery(this),s=i.closest(".detail-view");s.addClass("image-choices-field image-choices-show-labels")});var e=jQuery(".image-choices-field"),i=e.length?e.find(".gfield_radio li, .gfield_checkbox li"):[];i.length>0&&(i.addClass("image-choices-choice"),i.each(function(){var e=jQuery(this),i=e.data("init");i!==!0&&(e.data("init",!0),e.find("input").click(function(){onImageChoicesLabelClick(jQuery(this).siblings("label"))}),e.find("label").hover(function(e){return!jQuery(this).find("input").is(":disabled")&&void jQuery(this).closest("li").addClass(imageChoices_classes.hover)},function(e){return!jQuery(this).find("input").is(":disabled")&&void jQuery(this).closest("li").removeClass(imageChoices_classes.hover)}),e.find("input").focus(function(){jQuery(this).closest("li").addClass(imageChoices_classes.focus)}).blur(function(){jQuery(this).closest("li").removeClass(imageChoices_classes.focus)}))}),setTimeout(function(){imageChoices_SelectedFields()},100))}function imageChoices_ConditionalLogic(){var e=jQuery(".image-choices-field");e.length&&e.each(function(){var e=jQuery(this);e.is(":hidden")&&e.find(".image-choices-choice").removeClass(imageChoices_classes.selected+" "+imageChoices_classes.hover+" "+imageChoices_classes.focus)})}function imageChoices_loadCustomCss(e){var i=jQuery("head"),s=jQuery("body"),c=s.find("#gf_image_choices_css-css").length?s:i;"undefined"==typeof window.gf_image_choices_custom_css_global||jQuery("#gf_image_choices_global_custom_css").length||c.append('<style id="gf_image_choices_global_custom_css">'+window.gf_image_choices_custom_css_global+"</style>");var o="gf_image_choices_custom_css_"+e;window.hasOwnProperty(o)&&!jQuery("#"+o).length&&c.append('<style id="'+o+'">'+window[o]+"</style>")}function imageChoices_gformGetOptionLabel(e,i,s,c,o){e=jQuery(e);var a=e.closest("li"),t=a.index(),l=gformGetPrice(i),n=e.attr("price"),h=e.html().replace(/<span(.*)<\/span>/i,"").replace(n,""),r=gformGetPriceDifference(s,l);r=0==gformToNumber(r)?"":" "+r,e.attr("price",r);var d="option"==e[0].tagName.toLowerCase()?" "+r:"<span class='ginput_price'>"+r+"</span>",g=h+d;return window.gform_format_option_label&&(g=gform_format_option_label(g,h,d,s,l,c,o,t)),g}function gform_format_option_label(e,i,s,c,o,a,t,l){var n=[e],h=jQuery("#gform_"+a+" .gfield#field_"+a+"_"+t);if(h.length&&h.hasClass("image-choices-field")){var r=h.find(".ginput_container li:eq("+l+")");if(r.length){var d=r.find("label"),g=r.find("input"),f=g.attr("value"),m=f.indexOf("|")!==-1?f.substring(0,f.indexOf("|")):"",u=d.data("img"),_=d.find(".image-choices-choice-text").text();""===i&&(i=_),n=['<span class="image-choices-choice-image-wrap" style="background-image:url('+u+');">','<img src="'+u+'" class="image-choices-choice-image" alt="'+m+'" />',"</span>",'<span class="image-choices-choice-text">'+i+"</span>",'<span class="image-choices-choice-price">'+s+"</span>"]}}return n.join("")}var imageChoices_classes={selected:"image-choices-choice-selected",hover:"image-choices-choice-hover",focus:"image-choices-choice-focus"};jQuery(document).bind("gform_post_render",function(e,i,s){window.gformGetOptionLabel=imageChoices_gformGetOptionLabel,imageChoices_SetUpFields(),setTimeout(function(){imageChoices_loadCustomCss(i)},100)}),jQuery(document).bind("gform_post_conditional_logic",function(e,i,s,c){imageChoices_ConditionalLogic(),imageChoices_SelectedFields()}),window.gformGetOptionLabel=imageChoices_gformGetOptionLabel;